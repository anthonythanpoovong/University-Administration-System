CREATE TABLE "DEPARTMENTS" (
  "DEPARTMENT_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1,
  "DEPARTMENT_NAME" VARCHAR2(128) NOT NULL ENABLE,
  PRIMARY KEY ("DEPARTMENT_ID") USING INDEX ENABLE
);
CREATE TABLE "USERS" (
  "USER_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 100000000,
  "USERNAME" VARCHAR2(25) UNIQUE NOT NULL ENABLE,
  "PASSWORD" VARCHAR2(64) NOT NULL ENABLE,
  "ROLE" VARCHAR2(25) NOT NULL ENABLE,
  "ENROLLMENT_DATE" DATE NOT NULL ENABLE,
  "PHONE_NUMBER" NUMBER(13, 0) NOT NULL ENABLE,
  "EMAIL_ADDRESS" VARCHAR2(254) UNIQUE NOT NULL ENABLE,
  "FULL_NAME" VARCHAR2(30) NOT NULL ENABLE,
  "HOME_STREET_ADDRESS" VARCHAR2(30) NOT NULL ENABLE,
  "HOME_CITY" VARCHAR2(30) NOT NULL ENABLE,
  "HOME_PROVINCE" CHAR(2) NOT NULL ENABLE,
  "PROGRAM_ID" NUMBER,
  PRIMARY KEY ("USER_ID") USING INDEX ENABLE,
  UNIQUE ("PHONE_NUMBER") USING INDEX ENABLE,
  UNIQUE ("EMAIL_ADDRESS") USING INDEX ENABLE,
  CONSTRAINT "USER_ROLES" CHECK ( "ROLE" IN ('student', 'instructor', 'admin')) ENABLE
);
CREATE TABLE "COURSES" (
  "COURSE_CODE" VARCHAR2(128),
  "HOUR_UNITS" NUMBER NOT NULL ENABLE,
  "COURSE_NAME" VARCHAR2(128) NOT NULL ENABLE,
  "DEPARTMENT_ID" NUMBER NOT NULL ENABLE,
  PRIMARY KEY ("COURSE_CODE") USING INDEX ENABLE
);
CREATE TABLE "PROGRAMS" (
  "PROGRAM_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1,
  "PROGRAM_NAME" VARCHAR2(128) NOT NULL ENABLE,
  "DEPARTMENT_ID" NUMBER,
  PRIMARY KEY ("PROGRAM_ID") USING INDEX ENABLE
);
CREATE TABLE "TERMS" (
  "TERM_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1,
  "TERM_NAME" VARCHAR2(256) NOT NULL ENABLE,
  "START_DATE" DATE NOT NULL ENABLE,
  "END_DATE" DATE NOT NULL ENABLE,
  CONSTRAINT "CK_TERMS_DATERANGE" CHECK ("START_DATE"<="END_DATE") ENABLE,
  PRIMARY KEY ("TERM_ID") USING INDEX ENABLE
);
CREATE TABLE "FINANCIAL_INFORMATION" (
  "ITEM_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1,
  "LAST_ACTIVITY_DATE" DATE NOT NULL ENABLE,
  "AMOUNT_INCLUDING_TAX" NUMBER NOT NULL ENABLE,
  "BALANCE" NUMBER NOT NULL ENABLE,
  "TERM_ID" NUMBER NOT NULL ENABLE,
  "STUDENT_ID" NUMBER NOT NULL ENABLE,
  "ITEM_NAME" VARCHAR2(30) NOT NULL ENABLE,
  PRIMARY KEY ("ITEM_ID") USING INDEX ENABLE
);
CREATE TABLE "COURSE_SECTIONS" (
  "COURSE_CODE" VARCHAR2(128),
  "INSTRUCTOR_ID" NUMBER,
  "TERM_ID" NUMBER,
  "SECTION_ID" NUMBER NOT NULL ENABLE,
  "CAPACITY" NUMBER NOT NULL ENABLE,
  CONSTRAINT "COURSE_SECTIONS_KEYS" PRIMARY KEY ("COURSE_CODE", "TERM_ID", "SECTION_ID") USING INDEX ENABLE,
  CONSTRAINT "COURSE_SECTIONS_CODE_NOT_NULL" CHECK ( "COURSE_CODE" IS NOT NULL) ENABLE
);
CREATE TABLE "GRADES" (
  "GRADE_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1,
  "COURSE_CODE" VARCHAR2(128),
  "STUDENT_ID" NUMBER,
  "CREDIT_UNITS" NUMBER,
  "GRADE" CHAR(2),
  "GPA_ACHIEVED" NUMBER(3, 2) NOT NULL ENABLE,
  PRIMARY KEY ("GRADE_ID") USING INDEX ENABLE
);
CREATE TABLE "STUDENT_ENROLLMENTS" (
  "TRANSACTION_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1,
  "STUDENT_ID" NUMBER NOT NULL ENABLE,
  "COURSE_CODE" VARCHAR2(128) NOT NULL ENABLE,
  "TERM_ID" NUMBER NOT NULL ENABLE,
  "SECTION_ID" NUMBER NOT NULL ENABLE,
  PRIMARY KEY ("TRANSACTION_ID") USING INDEX ENABLE
);
CREATE TABLE "ACADEMIC_LETTER" (
  "RECORD_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1,
  "GRADE_ID" VARCHAR2(5),
  "DATE_TAKEN" DATE NOT NULL ENABLE,
  "STATUS" VARCHAR2(32) NOT NULL ENABLE,
  PRIMARY KEY ("RECORD_ID") USING INDEX ENABLE
);
ALTER TABLE "COURSES" ADD FOREIGN KEY ("DEPARTMENT_ID") REFERENCES "DEPARTMENTS" ("DEPARTMENT_ID") ENABLE;
ALTER TABLE "PROGRAMS" ADD FOREIGN KEY ("DEPARTMENT_ID") REFERENCES "DEPARTMENTS" ("DEPARTMENT_ID") ENABLE;
ALTER TABLE "GRADES" ADD FOREIGN KEY ("COURSE_CODE") REFERENCES "COURSES" ("COURSE_CODE") ENABLE;
ALTER TABLE "GRADES" ADD FOREIGN KEY ("STUDENT_ID") REFERENCES "USERS" ("USER_ID") ENABLE;
ALTER TABLE "COURSE_SECTIONS" ADD FOREIGN KEY ("COURSE_CODE") REFERENCES "COURSES" ("COURSE_CODE") ENABLE;
ALTER TABLE "COURSE_SECTIONS" ADD FOREIGN KEY ("INSTRUCTOR_ID") REFERENCES "USERS" ("USER_ID") ENABLE;
ALTER TABLE "COURSE_SECTIONS" ADD FOREIGN KEY ("TERM_ID") REFERENCES "TERMS" ("TERM_ID") ENABLE;
ALTER TABLE "FINANCIAL_INFORMATION" ADD FOREIGN KEY ("TERM_ID") REFERENCES "TERMS" ("TERM_ID") ENABLE;
ALTER TABLE "FINANCIAL_INFORMATION" ADD FOREIGN KEY ("STUDENT_ID") REFERENCES "USERS" ("USER_ID") ENABLE;
ALTER TABLE "STUDENT_ENROLLMENTS" ADD CONSTRAINT "STUDENT_ENROLLMENTS_STUDENT" FOREIGN KEY ("STUDENT_ID") REFERENCES "USERS" ("USER_ID") ENABLE;
ALTER TABLE "STUDENT_ENROLLMENTS" ADD CONSTRAINT "STUDENT_ENROLLMENTS_REFS" FOREIGN KEY ("COURSE_CODE", "TERM_ID", "SECTION_ID") REFERENCES "COURSE_SECTIONS" ("COURSE_CODE", "TERM_ID", "SECTION_ID") ON DELETE CASCADE ENABLE;
ALTER TABLE "USERS" ADD CONSTRAINT "USERS_PROGRAM" FOREIGN KEY ("PROGRAM_ID") REFERENCES "PROGRAMS" ("PROGRAM_ID") ON DELETE SET NULL ENABLE;